<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>undefined</title>
  <meta name="generator" content="Google Web Designer 15.2.1.0306">
  <style id="gwd-text-style">
    p {
      margin: 0px;
    }

    h1 {
      margin: 0px;
    }

    h2 {
      margin: 0px;
    }

    h3 {
      margin: 0px;
    }
  </style>
  <style>
    html,
    body {
      width: 100%;
      height: 100%;
      margin: 0px;
    }

    body {
      background-color: transparent;
      transform: perspective(1400px) matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      transform-style: preserve-3d;
    }

    body * {
      transform-style: preserve-3d;
    }

    .gwd-img-1cek {
      position: absolute;
      left: 50%;
      height: 136px;
      top: 0px;
      transform: translate(-50%, 0%) translate3d(142px, 185px, 0px);
    }

    .gwd-img-17yb {
      position: absolute;
      left: 50%;
      height: 171px;
      top: 0px;
      transform: translate(-50%, 0%) translate3d(-238px, 167px, 0px);
    }

    .gwd-img-7j5s {
      position: absolute;
      left: 50%;
      height: 136px;
      top: 0px;
      transform: translate(-50%, 0%) translate3d(142px, 370px, 0px);
    }

    .gwd-img-11be {
      position: absolute;
      left: 50%;
      height: 136px;
      top: 0px;
      transform: translate(-50%, 0%) translate3d(142px, 557px, 0px);
    }

    .gwd-img-1szn {
      position: absolute;
      left: 50%;
      height: 171px;
      top: 0px;
      transform: translate(-50%, 0%) translate3d(-238px, 353px, 0px);
    }

    .gwd-img-1jvz {
      position: absolute;
      left: 50%;
      height: 171px;
      top: 0px;
      transform: translate(-50%, 0%) translate3d(-238px, 539px, 0px);
    }

    .gwd-p-sier {
      position: absolute;
      height: 96px;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      width: 511px;
      font-size: 61px;
      transform: translate(-50%, 0%) translate3d(0px, 43px, 0px);
    }

    .gwd-p-11bj {
      position: absolute;
      height: 96px;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      color: rgb(255, 255, 255);
      width: 83px;
      font-size: 46px;
      transform: translate(-50%, 0%) translate3d(-242px, 225px, 0px);
    }

    .gwd-p-fvsw {
      position: absolute;
      height: 96px;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      color: rgb(255, 255, 255);
      width: 83px;
      font-size: 46px;
      transform: translate(-50%, 0%) translate3d(-242px, 411px, 0px);
    }

    .gwd-p-1vh6 {
      position: absolute;
      height: 96px;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      color: rgb(255, 255, 255);
      font-size: 46px;
      width: 175px;
      transform: translate(-50%, 0%) translate3d(-231px, 597px, 0px);
    }

    .gwd-span-17m7 {
      font-size: 42px;
    }

    .gwd-span-uzca {
      font-size: 25px;
      font-family: "Black Han Sans";
      color: rgb(255, 255, 255);
    }

    .gwd-span-v7ux {
      font-family: "Black Han Sans";
      color: rgb(255, 255, 255);
      font-size: 25px;
    }

    .gwd-p-xvkp {
      position: absolute;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      color: rgb(255, 255, 255);
      font-size: 46px;
      height: 57px;
      width: 68px;
      transform: translate(-50%, 0%) translate3d(115px, 227px, 0px);
    }

    .gwd-p-1s7g {
      position: absolute;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      color: rgb(255, 255, 255);
      font-size: 46px;
      height: 57px;
      width: 68px;
      transform: translate(-50%, 0%) translate3d(115px, 411px, 0px);
    }

    .gwd-p-oj44 {
      position: absolute;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      color: rgb(255, 255, 255);
      font-size: 46px;
      height: 57px;
      width: 68px;
      transform: translate(-50%, 0%) translate3d(115px, 597px, 0px);
    }

    .gwd-p-1uv9 {
      position: absolute;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      color: rgb(255, 255, 255);
      font-size: 46px;
      height: 57px;
      width: 121px;
      transform: translate(-50%, 0%) translate3d(8px, 227px, 0px);
    }

    .gwd-p-hq3m {
      position: absolute;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      color: rgb(255, 255, 255);
      font-size: 46px;
      height: 57px;
      width: 121px;
      transform: translate(-50%, 0%) translate3d(242px, 227px, 0px);
    }

    .gwd-p-cuob {
      position: absolute;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      color: rgb(255, 255, 255);
      font-size: 46px;
      height: 57px;
      width: 68px;
      transform: translate(-50%, 0%) translate3d(34px, 412px, 0px);
    }

    .gwd-p-1lhk {
      position: absolute;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      color: rgb(255, 255, 255);
      font-size: 46px;
      height: 57px;
      width: 83px;
      transform: translate(-50%, 0%) translate3d(223px, 412px, 0px);
    }

    .gwd-p-1x7m {
      position: absolute;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      color: rgb(255, 255, 255);
      font-size: 46px;
      height: 57px;
      width: 68px;
      transform: translate(-50%, 0%) translate3d(0px, 597px, 0px);
    }

    .gwd-p-woat {
      position: absolute;
      font-family: "Black Han Sans";
      left: 50%;
      top: 0px;
      color: rgb(255, 255, 255);
      font-size: 46px;
      height: 57px;
      width: 83px;
      transform: translate(-50%, 0%) translate3d(223px, 597px, 0px);
    }

    #first {
      cursor: pointer;
    }

    #second {
      cursor: pointer;
    }

    #third {
      cursor: pointer;
    }
  </style>
  <link href="https://fonts.googleapis.com/css?family=Black+Han+Sans:regular" rel="stylesheet" type="text/css">
</head>

<body class="htmlNoPages">
  <div id="first">
    <img class="gwd-img-1cek" id="a1" src="./img/1_1.png">
    <p class="gwd-p-xvkp" id="p5">VS</p>
    <p class="gwd-p-hq3m" id="p5_2">로톨</p>
    <p class="gwd-p-1uv9" id="p5_1">라이빗</p>
  </div>
  <div id="second">
    <img class="gwd-img-7j5s" id="a2" src="./img/1_1.png">
    <p class="gwd-p-1s7g" id="p6">VS</p>
    <p class="gwd-p-1lhk" id="p6_2">로직</p>
    <p class="gwd-p-cuob" id="p6_1">윈</p>
  </div>
  <div id="third">
    <img class="gwd-img-11be" id="a3" src="./img/1_1.png">
    <p class="gwd-p-oj44" id="p7">VS</p>
    <p class="gwd-p-woat" id="p7_2">플루</p>
    <p class="gwd-p-1x7m" id="p7_1">TNT</p>
  </div>
  <p class="gwd-p-sier" id="p1">5/24 경기 승부 예측</p>
  <img class="gwd-img-17yb" id="b1" src="./img/2_1.png">
  <img class="gwd-img-1szn" id="b2" src="./img/2_1.png">
  <img class="gwd-img-1jvz" id="b3" src="./img/2_1.png">
  <p class="gwd-p-11bj" id="p2">축구</p>
  <p class="gwd-p-fvsw" id="p3">농구</p>
  <p class="gwd-p-1vh6" id="p4"><span class="gwd-span-17m7">배드민턴<span class="gwd-span-uzca"></span></span><span
      class="gwd-span-v7ux"></span></p>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    let socket = io();
    const first = document.querySelector('#first');
    const second = document.querySelector('#second');
    const third = document.querySelector('#third');

    let bettingWin;

    let id = 0;
    let key = sessionStorage.getItem("key");
    let name = sessionStorage.getItem("name");

    let total_money;
    let team1_bet;
    let team2_bet;
    let team1_rate = 0;
    let team2_rate = 0;
    let team1_name = "";
    let team2_name = "";

    let balance = 0;

    first.addEventListener('click', () => {
      id = 0;
      if (bettingWin) {
        bettingWin.close();
      }
      bettingWin = window.open("betting.html", "childForm", "width=570, height=350, resizable = no, scrollbars = no");
      socket.emit("money", {
        key: key,
        name: name
      });
      setTimeout(init, 100);
    });
    second.addEventListener('click', () => {
      id = 1;
      if (bettingWin) {
        bettingWin.close();
      }
      bettingWin = window.open("betting.html", "childForm", "width=570, height=350, resizable = no, scrollbars = no");
      socket.emit("money", {
        key: key,
        name: name
      });
      setTimeout(init, 100);
    });
    third.addEventListener('click', () => {
      id = 2;
      if (bettingWin) {
        bettingWin.close();
      }
      bettingWin = window.open("betting.html", "childForm", "width=570, height=350, resizable = no, scrollbars = no");
      socket.emit("money", {
        key: key,
        name: name
      });
      setTimeout(init, 100);
    });
    socket.on('update', (data) => {
      console.log(data);
      total_money = data["games"][id]["total"];
      team1_bet = data["games"][id]["team1"]["betAmount"];
      team2_bet = data["games"][id]["team2"]["betAmount"];
      team1_rate = data["games"][id]["rate"]["team1"];
      team2_rate = data["games"][id]["rate"]["team2"];
      team1_name = data["games"][id]["team1"]["name"];
      team2_name = data["games"][id]["team2"]["name"];
      if (bettingWin) {
        setTimeout(() => {
          bettingWin.document.getElementById('total_money').innerHTML = total_money;
          bettingWin.document.getElementById('team1_bet').innerHTML = team1_bet;
          bettingWin.document.getElementById('team2_bet').innerHTML = team2_bet;
          bettingWin.document.getElementById('team1_rate').innerHTML = team1_rate;
          bettingWin.document.getElementById('team2_rate').innerHTML = team2_rate;
          bettingWin.document.getElementById('option1').innerHTML = team1_name;
          bettingWin.document.getElementById('option2').innerHTML = team2_name;
          bettingWin.document.getElementById('option1').setAttribute("value", team1_name);
          bettingWin.document.getElementById('option2').setAttribute("value", team2_name);
        }, 100);
      }
    });
    socket.on('money', (data) => {
      balance = data["balance"];
      if (bettingWin) {
        setTimeout(() => {
          bettingWin.document.getElementById('balance').innerHTML = balance;
        }, 100);
      }
    });

    const init = () => {
      bettingWin.document.getElementById('bet_button').addEventListener('click', () => {
        let team = bettingWin.document.getElementById('team_select').value;
        let bet_amount = bettingWin.document.getElementById('bet_amount').value;
        let team1_score = bettingWin.document.getElementById('team1_score').value;
        let team2_score = bettingWin.document.getElementById('team2_score').value;
        //null check
        if (team == "" || bet_amount == "" || team1_score == "" || team2_score == "") {
          alert("빈칸을 모두 채워주세요.");
          return;
        }
        socket.emit('bet', {
          key: key,
          name: name,
          team: team,
          amount: bet_amount,
          gameId: id
        });
        socket.emit('betscore', {
          key: key,
          name: name,
          score: [team1_score, team2_score],
          gameId: id
        });
        bettingWin.document.getElementById('bet_button').disabled = true;
        bettingWin.document.getElementById('bet_amount').disabled = true;
        bettingWin.document.getElementById('team1_score').disabled = true;
        bettingWin.document.getElementById('team2_score').disabled = true;
        bettingWin.document.getElementById('team_select').disabled = true;
      });
      bettingWin.document.getElementById('cancel_bet_button').addEventListener('click', () => {
        console.log("cancel");
        socket.emit('cancelbet', {
          key: key,
          name: name,
          gameId: id
        });
        socket.emit('cancelbetscore', {
          key: key,
          name: name,
          gameId: id
        });
        bettingWin.document.getElementById('bet_button').disabled = false;
        bettingWin.document.getElementById('bet_amount').disabled = false;
        bettingWin.document.getElementById('team1_score').disabled = false;
        bettingWin.document.getElementById('team2_score').disabled = false;
        bettingWin.document.getElementById('team_select').disabled = false;
      });
    }

    setInterval(() => {
      socket.emit("money", {
        key: key,
        name: name
      });
    }, 1000);

  </script>
</body>

</html>